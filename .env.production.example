# ========================================
# PRODUCTION ENVIRONMENT VARIABLES
# ========================================
# This file shows the required environment variables for Vercel production deployment.
# Set these in Vercel Dashboard → Project Settings → Environment Variables
# Apply to: Production, Preview, and Development environments

# ========================================
# DATABASE CONFIGURATION (REQUIRED)
# ========================================
# Use Neon PostgreSQL with both pooled and direct connections
# Get your connection strings from: https://console.neon.tech

# DATABASE_URL - Pooled connection (required for Vercel serverless functions)
# Use the connection string WITH "-pooler" in the hostname
# Example: postgresql://neondb_owner:password@ep-xxxxx-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
DATABASE_URL="postgresql://neondb_owner:YOUR_PASSWORD@ep-xxxxx-pooler.REGION.aws.neon.tech/neondb?sslmode=require"

# DIRECT_URL - Direct connection (required for Prisma migrations)
# Use the connection string WITHOUT "-pooler" in the hostname
# Example: postgresql://neondb_owner:password@ep-xxxxx.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
DIRECT_URL="postgresql://neondb_owner:YOUR_PASSWORD@ep-xxxxx.REGION.aws.neon.tech/neondb?sslmode=require"

# ========================================
# IMPORTANT NOTES FOR NEON SETUP
# ========================================
# 1. The only difference between DATABASE_URL and DIRECT_URL is "-pooler" in the hostname
# 2. DO NOT use channel_binding=require - it can cause connection failures in Vercel
# 3. Always use sslmode=require for secure connections
# 4. After setup, rotate your database password in Neon dashboard for security

# ========================================
# CLERK AUTHENTICATION (REQUIRED)
# ========================================
# Get these from: https://dashboard.clerk.com
# Use PRODUCTION keys for production environment
# Format examples: pk_live_xxxxxxxxxxxxxxxxxxxxx (publishable) and sk_live_xxxxxxxxxxxxxxxxxxxxx (secret)

NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_live_xxxxxxxxxxxxxxxxxxxxx"
CLERK_SECRET_KEY="sk_live_xxxxxxxxxxxxxxxxxxxxx"

# Clerk URL Configuration - After sign-up/sign-in redirects
NEXT_PUBLIC_CLERK_SIGN_IN_URL="/sign-in"
NEXT_PUBLIC_CLERK_SIGN_UP_URL="/sign-up"
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL="/onboarding"
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL="/onboarding"

# ========================================
# CLERK DASHBOARD CONFIGURATION REQUIRED
# ========================================
# In your Clerk Dashboard (https://dashboard.clerk.com), set:
# 1. Sessions → Customize session token → No changes needed (DB-based guards)
# 2. Paths/URLs:
#    - After sign-up URL: /onboarding
#    - After sign-in URL: /onboarding
# 3. Verify your Publishable Key and Secret Key match these env vars

# ========================================
# AWS S3 (OPTIONAL - for document uploads)
# ========================================
# Only needed if using S3 for certification document storage
AWS_ACCESS_KEY_ID="your_access_key_here"
AWS_SECRET_ACCESS_KEY="your_secret_key_here"
AWS_REGION="us-east-1"
AWS_S3_BUCKET_NAME="your_bucket_name_here"
NEXT_PUBLIC_AWS_S3_BUCKET_URL="https://your-bucket.s3.amazonaws.com"

# ========================================
# EMAIL SERVICE (OPTIONAL - for alerts)
# ========================================
# Only needed for email notifications about expiring certifications
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your_email@gmail.com"
SMTP_PASSWORD="your_app_password"
EMAIL_FROM="noreply@yourdomain.com"

# ========================================
# DEPLOYMENT CHECKLIST
# ========================================
# Before deploying to production:
# ✓ Set DATABASE_URL with Neon pooled connection (-pooler)
# ✓ Set DIRECT_URL with Neon direct connection (no -pooler)
# ✓ Set Clerk production keys (formats: pk_live_... and sk_live_...)
# ✓ Configure Clerk Dashboard redirect URLs to /onboarding
# ✓ Verify all environment variables in Vercel Dashboard
# ✓ Run database migrations: npx prisma migrate deploy
# ✓ Test sign-up flow: Sign Up → Select Role → Fill Profile → Dashboard
